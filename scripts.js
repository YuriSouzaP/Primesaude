var userID=0,product="",flow_type="";function dataLayerGetPress(){var t={name:!1,email:!1,phone:!1,cep:!1};Object.keys(t).forEach(function(e){var a;document.getElementById(e)&&(a=e,input=document.getElementById(a),input.addEventListener("keyup",function(e){t[a]||(dataLayer.push({event:"lead-rio",acao:"step-01",rotulo:a}),t[a]=!0)}))})}function menuToggle(){$(this).hasClass("navOpen"),$("#navBtn").toggleClass("navOpen"),$(".nav").toggleClass("listOpen"),$("header").toggleClass("display")}function validates(e){$.validator.addMethod("accept_terms_value",function(e,a){return"0"!==e},"Você não poderá seguir sem aceitar nossa política de privacidade. Os seus dados não serão compartilhados."),$(e).validate({rules:{product:{required:!0},name:{required:!0,minlength:2},email:{required:!0,email:!0},phone:{required:!0,phone:!0},cep:{required:!0,minlength:9},accept_terms:{required:!0,accept_terms_value:!0}},messages:{product:{required:"Escolha um Produto"},name:{required:"Digite o nome",minlength:"O nome deve conter pelo menos 2 caracteres"},email:{required:"Digite seu email",email:"Digite um email v&aacute;lido"},phone:{required:"Digite um telefone",phone:"Digite um telefone válido"},cep:{required:"Digite um CEP",minlength:"O CEP deve conter 8 números"},accept_terms:{required:"Você não poderá seguir sem aceitar nossa política de privacidade. Os seus dados não serão compartilhados."}},submitHandler:function(e){return ajaxPost({id:$("#step_01"),action:"newlead",ajax_url:"?a=actions",redirecturl:""}).done(function(e){"error"===e.status||("success"===e.status?"RJ"==e.location?(product=$("#step_01 input[name=product]:checked").val(),userID=e.user_id,submitDataLayer(product,"step-01","dados-basicos"),$("#step_01").addClass("previous"),"lead-pj"==urlParamVal("custom_campaign")?($("#step_01, #step_02_cnpj").toggleClass("hidden"),submitDataLayer(product,"step-02","para minha empresa"),flow_type="pj"):$("#step_01, #step_02").toggleClass("hidden")):($.fancybox.open('<h3 class="space-h-20 text-center"><img src="assets/_dist/images/icon-place-not-allowed.png" /><br />Identificamos que o seu CEP não é do Rio de Janeiro</h3><a href="https://portal.sulamericaseguros.com.br/" target="_blank" class="btn btn-action btn-default">Peça uma cotação dos planos nacionais aqui</a>'),setTimeout(function(){$("#cep").focus()},1e3)):alert("Estamos com instabilidade no servidor."))}).fail(function(e){alert("Ocorreu um erro ao gravar esta informação. Tente novamente mais tarde.")}),!1}})}function setTarget(){$(".loader").fadeIn("300"),ajaxPost({id:$("#step_01, #step_02"),action:"updatelead",ajax_url:"?a=actions",redirecturl:""}).done(function(e){$(".loader").fadeOut("300"),"error"===e.status||("success"===e.status?($("#step_02").addClass("previous"),"Pessoa Física"==$("#step_02 input[name=target]:checked").val()?(submitDataLayer(product,"step-02","para mim"),flow_type="pf",$("#step_02, #step_02_cpf").toggleClass("hidden")):(submitDataLayer(product,"step-02","para minha empresa"),$("#step_02, #step_02_cnpj").toggleClass("hidden"),flow_type="pj")):alert("Estamos com instabilidade no servidor."))}).fail(function(e){alert("Ocorreu um erro ao gravar esta informação. Tente novamente mais tarde.")})}function setCPF(e){$(".loader").fadeIn("300"),$("#step_02_cpf").validate({rules:{cpf:{required:!0,minlength:9}},messages:{cpf:{required:"Digite o seu CPF",minlength:"O CPF deve conter 11 números"}},invalidHandler:function(e){$(".loader").fadeOut("300")},submitHandler:function(e){ajaxPost({id:$("#step_01, #step_02_cpf"),action:"updatelead",ajax_url:"?a=actions",redirecturl:""}).done(function(e){$(".loader").fadeOut("300"),"error"===e.status||("success"===e.status?($("#step_02_cpf").addClass("previous"),submitDataLayer(product,"sucesso-"+flow_type,userID),$("#step_02_cpf, #step_done").toggleClass("hidden")):alert("Estamos com instabilidade no servidor."))}).fail(function(e){alert("Ocorreu um erro ao gravar esta informação. Tente novamente mais tarde.")})}})}function setCNPJ(e){$(".loader").fadeIn("300"),$("#step_02_cnpj").validate({rules:{cnpj:{required:!0,minlength:9}},messages:{cnpj:{required:"Digite o seu CNPJ",minlength:"O CNPJ deve conter 14 números"}},invalidHandler:function(e){$(".loader").fadeOut("300")},submitHandler:function(e){ajaxPost({id:$("#step_01, #step_02_cnpj"),action:"updatelead",ajax_url:"?a=actions",redirecturl:""}).done(function(e){$(".loader").fadeOut("300"),"error"===e.status||("success"===e.status?($("#step_02_cnpj").addClass("previous"),submitDataLayer(product,"sucesso-"+flow_type,"empresa"),$("#step_02_cnpj, #step_03").toggleClass("hidden")):alert("Estamos com instabilidade no servidor."))}).fail(function(e){alert("Ocorreu um erro ao gravar esta informação. Tente novamente mais tarde.")})}})}function setPeopleQuantityCNPJ(){ajaxPost({id:$("#step_01, #step_03"),action:"updatelead",ajax_url:"?a=actions",redirecturl:""}).done(function(e){"error"===e.status||("success"===e.status?($("#step_03").addClass("previous"),dataLayer.push({event:"lead-rio",acao:"step-03",rotulo:"empresa"}),$("#step_03, #step_done").toggleClass("hidden")):alert("Estamos com instabilidade no servidor."))}).fail(function(e){alert("Ocorreu um erro ao gravar esta informação. Tente novamente mais tarde.")})}function submitDataLayer(e,a,t){dataLayer.push({event:"lead-rio",categoria:e,acao:a,rotulo:t})}$(document).ready(function(){dataLayerGetPress(),$("#lead .loading").delay(600).fadeOut(300),$("#phone")[0]&&$("#phone").mask("(99) 9999-99999").focusout(function(e){var a=e.currentTarget||e.srcElement,e=a.value.replace(/\D/g,""),a=$(a);a.unmask(),10<e.length?a.mask("(99) 99999-9999"):a.mask("(99) 9999-9999")}).click(function(e){$("#phone").mask("(99) 9999-99999")}),$("#cpf").mask("999.999.999-99"),$("#cnpj").mask("99.999.999/9999-99"),$("#cep").mask("99999-999"),$("#cpf, #cnpj, #cep, #photo").click(function(){$(this).focus()}),$(".btn-back").click(function(){$("#lead form.previous:not(#step_01) input[type=radio]:checked").last().prop("checked",!1),$(this).parent().toggleClass("hidden"),$("#lead form.previous").last().toggleClass("hidden").delay(300).toggleClass("previous")}),$("#step_01 input[name=product]").change(function(){"Auto"==$("#step_01 input[name=product]:checked").val()?$("label[for=targetFamilia] span").html("Para mim"):$("label[for=targetFamilia] span").html("Para mim e minha família")}),$("header a, .scroll").click(function(e){var a;location.pathname.replace(/^\//,"")!=this.pathname.replace(/^\//,"")||location.hostname!=this.hostname||(a=(a=$(this.hash)).length?a:$("[name="+this.hash.slice(1)+"]")).length&&(e.preventDefault(),$("html, body").animate({scrollTop:a.offset().top-30},600)),window.outerWidth<=640&&menuToggle()}),$(window).scroll(function(){$(window).scrollTop()<100&&($("#banner #lead").addClass("action"),setTimeout(function(){$("#banner #lead").removeClass("action")},1e3))}),$(".flag.toast")&&$(".flag.toast").on("click",function(){$(this).fadeOut("300")})});var ajaxPost=function(s){$("#lead .loading").fadeIn(300);var o=new $.Deferred;if($(s.id)[0])serialize=$(s.id).serialize().replace("_&","&");else{if(!s.form)return!1;serialize=s.form}return $.ajax({url:s.ajax_url,type:"post",data:{action:s.action,post:serialize},success:function(e){$("#lead .loading").delay(600).fadeOut(300);var t=$(1<s.id.length?s.id[1]:s.id).validate(),a=!0;try{e=$.parseJSON(e)}catch(e){a=!1,0}a&&("success"==e.status?o.resolve(e):"error"==e.status&&($.isArray(e.errors)?$.each(e.errors,function(e,a){t.showErrors(a.validationjquery)}):$(s.id)[0]&&t.showErrors(e.errors.validationjquery))),o.resolve(e)},fail:function(e){$("#lead .loading").delay(600).fadeToggle(300)}}),o.promise()};function urlParamVal(e){return new URL(window.location.href).searchParams.get(e)}
